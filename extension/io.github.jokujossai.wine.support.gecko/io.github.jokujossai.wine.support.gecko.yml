id: io.github.jokujossai.wine.support.gecko
branch: stable
runtime: io.github.jokujossai.wine.base
runtime-version: '25.08'
sdk: org.freedesktop.Sdk//25.08
build-extension: true
separate-locales: false
appstream-compose: false

modules:
  - name: wine-gecko
    buildsystem: simple
    build-commands:
      - cp -a wine-gecko-* ${FLATPAK_DEST}/
      - install -Dm644 io.github.jokujossai.wine.support.gecko.metainfo.xml -t ${FLATPAK_DEST}/share/metainfo/
    sources:
      - type: archive
        url: https://dl.winehq.org/wine/wine-gecko/2.47.4/wine-gecko-2.47.4-x86.tar.xz
        strip-components: 0
        sha256: 2cfc8d5c948602e21eff8a78613e1826f2d033df9672cace87fed56e8310afb6
        x-checker-data:
          type: html
          url: https://dl.winehq.org/wine/wine-gecko/
          version-pattern: href="(\d+\.[\d.]+)/"
          url-template: https://dl.winehq.org/wine/wine-gecko/$version/wine-gecko-$version-x86.tar.xz
      - type: archive
        url: https://dl.winehq.org/wine/wine-gecko/2.47.4/wine-gecko-2.47.4-x86_64.tar.xz
        strip-components: 0
        sha256: fd88fc7e537d058d7a8abf0c1ebc90c574892a466de86706a26d254710a82814
        x-checker-data:
          type: html
          url: https://dl.winehq.org/wine/wine-gecko/
          version-pattern: href="(\d+\.[\d.]+)/"
          url-template: https://dl.winehq.org/wine/wine-gecko/$version/wine-gecko-$version-x86_64.tar.xz
      - type: file
        path: io.github.jokujossai.wine.support.gecko.metainfo.xml
