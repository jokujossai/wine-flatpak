id: io.github.jokujossai.wine.Version.wine-10-wow64
branch: '25.08'
runtime: io.github.jokujossai.wine.base
runtime-version: '25.08'
sdk: org.freedesktop.Sdk//25.08
build-extension: true
separate-locales: false
appstream-compose: false

sdk-extensions:
  - org.freedesktop.Sdk.Extension.mingw-w64

build-options:
  prefix: /app/wine/wine-10-wow64
  prepend-path: /app/wine/wine-10-wow64/bin
  append-path: /usr/lib/sdk/mingw-w64/bin

modules:

  # Wine (WoW64 unified build)

  - name: wine
    config-opts:
      - --enable-archs=i386,x86_64
      - --disable-tests
    make-install-args:
      - LDCONFIG=/bin/true
      - UPDATE_DESKTOP_DATABASE=/bin/true
      - INSTALL_PROGRAM_FLAGS=-s
    post-install:
      - ln -sf /app/share/wine/support/gecko ${FLATPAK_DEST}/share/wine/gecko
      - ln -sf /app/share/wine/support/mono ${FLATPAK_DEST}/share/wine/mono
    sources:
      - type: archive
        url: https://dl.winehq.org/wine/source/10.x/wine-10.20.tar.xz
        sha256: 81b4a153958f6247fe5041d5df65eadcbbeea1b6ba8cda24eb7e3d7ce2d1fe3c
        x-addons-url: >-
          https://gitlab.winehq.org/wine/wine/-/raw/master/dlls/appwiz.cpl/addons.c
        x-checker-data:
          type: html
          url: https://dl.winehq.org/wine/source/10.x/
          version-pattern: wine-(\d+\.[\d.]+)\.tar\.xz
          url-template: https://dl.winehq.org/wine/source/10.x/wine-$version.tar.xz
          versions:
            <: '11.0'
          is-main-source: true

  # Tools

  - ../modules/winetricks.yml
